"use strict";void function(e,t,o){function r(e,t,o){var r=e.data.site,i=o||r.find("[robot-home='"+t+"']");if(1!==i.length)return void r.trigger("containerRegistered",["Multiple homes with the same name. Home name: "+t]);var n=r.prop("registeredHomes");n[t]=i,r.prop("registeredHomes",n),r.trigger("homeRegistered")}function i(t){var o=t.data.site,r=o.find("[robot-home]");r.each(function(t,r){var i=e(r),n=i.attr("robot-home");!n||o.prop("registeredHomes")[n]&&o.prop("registeredHomes")[n]===i||o.trigger("registerHome",[n,i])}),o.trigger("homesRegistered")}function n(t,o){var r=t.data.site,i=r.prop("registeredHomes")[o.home];i.prop("defaultContentRemoved")||(i.prop("defaultContent",i.html()),i.html(""),i.prop("defaultContentRemoved",!0));var n=e(i.prop("defaultContent")||"<div></div>");i.append(n),e.ajax({url:"/robot/get",data:{robot:o},success:function(e){n.after(e),n.remove(),r.trigger("robotLoaded",[null,o])},error:function(e){r.trigger("robotLoaded",[e])}})}function a(e,t){e.stopPropagation();var o=e.data.site;t.forEach(function(e){o.trigger("loadRobot",e)}),o.trigger("robotsLoaded")}e(function(){var s=e("#Noodles");s.prop("registeredHomes",s.prop("registeredHomes")||[]),s.on("loadRobots",{site:s},a),s.on("loadRobot",{site:s},n),s.on("registerHomes",{site:s},i),s.on("registerHome",{site:s},r),s.trigger("registerHomes"),setTimeout(function(){e(".flash-message-container").slideUp(1e3)},1500),e(".simpleMDE > textarea").each(function(t,r){var i=e(r),n=new o({element:r,autoDownloadFontAwesome:!1});i.prop("simpleMDE",function(){return n})}),e('[data-function*="codemirror"]').each(function(o,r){var i=e(r),n=i.text();i.text("");var a=i.parent().find('[data-codemirror="preview"]'),s=t(r,{smartIndent:!0,indentWithTabs:!0,lineNumbers:!0,mode:i.attr("data-mode")||"pug",value:n});if(!i.is(":visible"))var d=setInterval(function(){i.is(":visible")&&(s.refresh(),clearTimeout(d))},250);if(i.prop("codemirror",function(){return s}),a.length){var p=void 0;i.on("input",function(t){t.stopPropagation(),t.preventDefault(),clearTimeout(p),p=setTimeout(function(){e.ajax({url:"/renderPug",data:{pug:i.prop("codemirror").getValue(),locals:{}},success:function(e){a.html(e)}})},1e3)})}}),e(".bs-date").datetimepicker({format:"MM/DD/YYYY"}),e('input[type="color"]').spectrum({showInput:!0,preferredFormat:"hex"})})}(jQuery.noConflict(),CodeMirror,SimpleMDE);
//# sourceMappingURL=scripts.min.js.map
