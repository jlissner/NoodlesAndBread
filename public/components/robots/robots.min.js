"use strict";void function(t,r){function a(t){var r=t.data.factoryName,a=r.val();s.get(null,function(t){for(var o=0,e=t.length;o<e;o++)if(!a||t[o].name.toLowerCase()===a.toLowerCase())return void r.trigger("validateFactoryName",[!1]);r.trigger("validateFactoryName",[!0])})}function o(r){r.stopPropagation(),r.preventDefault();var a=t(r.currentTarget),o=a.parent();o.hasClass("has-error")&&a.val()&&o.removeClass("has-error")}function e(r){r.stopPropagation(),r.preventDefault();var a=t(r.currentTarget),o=a.closest('[robot-factory="attribute"]'),e=o.find('[robot-factory="attribute-robot"]'),i=a.val();return"Robot"===i?void e.prop("disabled",!1):void e.prop("disabled",!0)}function i(r){r.stopPropagation(),r.preventDefault(),t(r.currentTarget).closest('[robot-factory="attribute"]').remove()}function n(t){t.stopPropagation(),t.preventDefault();var r=t.data.factoryAttributes,a=t.data.newFactoryAttribute;r.append(a.clone()),r.last().find('[robot-factory="attribute-name"]').focus()}function c(r){r.stopPropagation(),r.preventDefault();var a=r.data.factory,o=r.data.factoryAttributes,e=[],i=0;o.find('[robot-factory="attribute"]').each(function(r,o){var n=t(o),c=n.find('[robot-factory="attribute-name"]'),f=c.val(),u=n.find('[robot-factory="attribute-is-list"]').prop("checked"),s=n.find('[robot-factory="attribute-type"]').val(),d=n.find('[robot-factory="attribute-robot"]').val();if(!f||e.filter(function(t){return t.name===f}).length)return c.parent().addClass("has-error"),i++,void a.prop("builtFactory",!1).trigger("factoryBuilt");var b={name:f,type:u?[s]:s,id:d};e.push(b)}),a.prop("builtFactory",e).trigger("factoryBuilt")}function f(r){console.log("triggered"),r.stopPropagation(),r.preventDefault();var a=r.data.factory,o=r.data.factoryName,e=r.data.saveFactory;e.prop("disabled",!0).trigger("buildFactory");var i=a.prop("builtFactory");if(i){var n={name:o.val(),schema:i};s.add(n,t.noop,function(t){console.error(t)})}e.prop("disabled",!1)}function u(r){var u=t(r),s=u.find('[robot-factory="name"]'),d=u.find('[robot-factory="attributes"]'),b=u.find('[robot-factory="attribute-add"]'),l=d.find('[robot-factory="attribute"]').clone(),p=u.find('[robot-factory="save"]');s.on("input",{factoryName:s},a),u.on("buildFactory",{factory:u,factoryAttributes:d},c),u.on("validateFactoryName",function(t,r){t.stopPropagation();var a=s.parent();a.removeClass("has-success has-error"),r?(a.addClass("has-success"),p.prop("disabled",!1)):(a.addClass("has-error"),p.prop("disabled",!0))}),d.on("input",'[robot-factory="attribute-name"]',o),d.on("input",'[robot-factory="attribute-type"]',e),d.on("click",'[robot-factory="attribute-delete"]',i),b.on("click",{factoryAttributes:d,newFactoryAttribute:l},n),p.on("click",{factory:u,factoryName:s,saveFactory:p},f)}var s=r("RobotFactories");t(function(){u("[robot-factory='factory']")})}(jQuery.noConflict(),duck);
//# sourceMappingURL=robots.min.js.map
